{"version":3,"file":"fjl.errorThrowing.js","sources":["../../src/generated/version.js","../../src/fjl.errorThrowing.js"],"sourcesContent":["/**\n * @memberOf module:fjlErrorThrowing\n * @property version {String} - Semantic version string.\n * @note Content generated by '{project-root}/node-scripts/VersionNumberReadStream.js'.\n * @generated Fri Nov 10 2017 22:07:46 GMT-0500 (Eastern Standard Time) \n */\n\nexport let version = '0.6.1';\n\nexport default version;\n\n","/**\r\n * @module fjlErrorThrowing\r\n */\r\nimport {\r\n    typeOf, isset,\r\n    _isType as isType,\r\n    map, length, intercalate,\r\n    isString, isArray, isFunction,\r\n    curry, curry4\r\n} from 'fjl';\r\n\r\n/**\r\n * @memberOf module:fjlErrorThrowing\r\n * @property version {String}\r\n */\r\nexport {version} from './generated/version';\r\n\r\n/**\r\n * @typedef {*} Any - Synonym for 'any value'.\r\n */\r\n\r\n/**\r\n * @typedef {Object<value, valueName, expectedTypeName, foundTypeName, messageSuffix>} TemplateContext\r\n * @description Template context used for error message renderers (functions that take a context obj and return a string).\r\n * @property value {Any}\r\n * @property valueName {String}\r\n * @property expectedTypeName {String} - Expected name of constructor of `value`;  E.g., usually `SomeConstructor.name`;\r\n * @property foundTypeName {String} - Found types name;  E.g., `FoundConstructor.name`;\r\n * @property [messageSuffix=null] {Any} - Message suffix (sometimes an extra hint or instructions for\r\n *  directing user to fix where his/her error has occurred).  Optional.\r\n */\r\n\r\n/**\r\n * Error message template function.\r\n * @typedef {Function} errorMessageCall\r\n * @param tmplContext {TemplateContext}\r\n * @returns {String}\r\n */\r\n\r\n/**\r\n * Used to ensure value matches passed in type.\r\n * @typedef {Function} errorIfNotType\r\n * @param valueName {String}\r\n * @param value {Any}\r\n * @param type {String|Function} - Constructor name or constructor.\r\n * @throws {Error} - If value doesn't match type.\r\n * @returns {Undefined}\r\n */\r\n\r\n/**\r\n * Used to ensure a value matches one of one or more types passed in.\r\n * @typedef {Function} errorIfNotTypes\r\n * @param valueName {String}\r\n * @param value {Any}\r\n * @param valueTypes {...(String|Function)} - Constructor names or constructors.\r\n * @throws {Error} - If value doesn't match type.\r\n * @returns {Undefined}\r\n */\r\n\r\nexport const\r\n\r\n    /**\r\n     * Resolves/normalizes a type name from either a string or a constructor.\r\n     * @private\r\n     * @function module:fjlErrorThrowing.getTypeName\r\n     * @param type {Function|String} - String or function representing a type.\r\n     * @returns {String}\r\n     * @private\r\n     */\r\n    getTypeName = type => {\r\n        if (isString(type)) { return type; }\r\n        else if (isFunction(type)) { return type.name; }\r\n        throw Error('`fjlErrorThrowing.getTypeName` only accepts strings and/or constructors.  ' +\r\n            'Value type received: ' + typeOf(type) + ';  Value: ' + type);\r\n    },\r\n\r\n    /**\r\n     * Returns a boolean indicating whether given value matches given type.\r\n     * @function module:fjlErrorThrowing.defaultTypeChecker$\r\n     * @param Type {String|Function|Class} - Type name, constructor and/or class.\r\n     * @param value {*}\r\n     * @returns {Boolean}\r\n     */\r\n    defaultTypeChecker$ = (Type, value) =>\r\n        isType(getTypeName(Type), value) || isset(value) && value instanceof Type,\r\n\r\n    /**\r\n     * Pretty prints an array of types/type-strings for use by error messages;\r\n     * Outputs \"`SomeTypeName`, ...\" from [SomeType, 'SomeTypeName', etc...]\r\n     * @private\r\n     * @function module:fjlErrorThrowing.multiTypesToString\r\n     * @param types {Array|TypesArray}\r\n     * @return {String}\r\n     * @private\r\n     */\r\n    multiTypesToString = types => length(types) ?\r\n             intercalate(', ', map(type => `\\`${getTypeName(type)}\\``, types)) : '',\r\n\r\n    /**\r\n     * Prints a message from an object.  Object signature:\r\n     * {contextName, valueName, value, expectedTypeName, foundTypeName, messageSuffix}\r\n     * @function module:fjlErrorThrowing.defaultErrorMessageCall\r\n     * @param tmplContext {Object|TemplateContext} - Object to use in error template.\r\n     * @returns {string}\r\n     * @private\r\n     */\r\n    defaultErrorMessageCall = tmplContext => {\r\n        const {\r\n            contextName, valueName, value, expectedTypeName,\r\n            foundTypeName, messageSuffix\r\n        } = tmplContext,\r\n            isMultiTypeNames = isArray(expectedTypeName),\r\n            typesCopy = isMultiTypeNames ? 'of type' : 'of one of the types',\r\n            typesToMatchCopy = isMultiTypeNames ? multiTypesToString(expectedTypeName) : expectedTypeName;\r\n        return (contextName ? `\\`${contextName}.` : '`') +\r\n            `${valueName}\\` is not ${typesCopy}: ${typesToMatchCopy}.  ` +\r\n            `Type received: ${foundTypeName}.  Value: ${value};` +\r\n            `${messageSuffix ?  '  ' + messageSuffix + ';' : ''}`;\r\n    },\r\n\r\n    /**\r\n     * Gets the error message thrower seeded with passed in errorMessage template call.\r\n     * @function module:fjlErrorThrowing.getErrorIfNotTypeThrower$\r\n     * @param errorMessageCall {Function|errorMessageCall}\r\n     * @returns {Function|errorIfNotType}\r\n     */\r\n    getErrorIfNotTypeThrower$ = errorMessageCall => (contextName, valueName, value, ValueType, messageSuffix = null,\r\n                                                     typeChecker = defaultTypeChecker$) => {\r\n        const expectedTypeName = getTypeName(ValueType),\r\n            foundTypeName = typeOf(value);\r\n        if (typeChecker(ValueType, value)) { return; } // Value matches type\r\n        throw new Error(errorMessageCall(\r\n            {contextName, valueName, value, expectedTypeName, foundTypeName, messageSuffix}\r\n        ));\r\n    },\r\n\r\n    /**\r\n     * Gets the error message thrower seeded with passed in errorMessage template call.\r\n     * @function module:fjlErrorThrowing.getErrorIfNotTypesThrower$\r\n     * @param errorMessageCall {Function|errorMessageCall}\r\n     * @returns {Function|errorIfNotTypes}\r\n     */\r\n    getErrorIfNotTypesThrower$ = errorMessageCall => (contextName, valueName, value, ...valueTypes) => {\r\n        const expectedTypeNames = valueTypes.map(getTypeName),\r\n            matchFound = expectedTypeNames.some(ValueType => isType(ValueType, value)),\r\n            foundTypeName = typeOf(value);\r\n        if (matchFound) { return; }\r\n        throw new Error(\r\n            errorMessageCall({\r\n                contextName, valueName, value,\r\n                expectedTypeName: expectedTypeNames, foundTypeName\r\n            })\r\n        );\r\n    },\r\n\r\n    /**\r\n     * Checks that passed in `value` is of given `type`.  Throws an error if value\r\n     * is not of given `type`.  This is the un-curried version.  For the curried version\r\n     * see `module:fjlErrorThrowing.errorIfNotType`.\r\n     * @function module:fjlErrorThrowing.errorIfNotType$\r\n     * @param contextName {String} - Name of context to attribute errors if thrown.\r\n     * @param valueName {String} - String rep of value.\r\n     * @param value {Any}\r\n     * @param type {String|Function} - Type's name or type itself.\r\n     * @param [messageSuffix=null] {String} - Optional.\r\n     * @returns {undefined}\r\n     * @uncurried\r\n     */\r\n    errorIfNotType$ = getErrorIfNotTypeThrower$(defaultErrorMessageCall),\r\n\r\n    /**\r\n     * Checks that passed in `value` is of one of the given `types`.  Throws an error if value\r\n     *  is not of one of the given `types`.  This is the un-curried version.  For the curried version\r\n     * see `module:fjlErrorThrowing.errorIfNotTypes`.\r\n     * @type {Function|module:fjlErrorThrowing.errorIfNotTypes}\r\n     * @function module:fjlErrorThrowing.errorIfNotTypes$\r\n     * @param contextName {String} - Name of context to attribute errors if thrown.\r\n     * @param valueName {String} - String rep of value.\r\n     * @param value {Any}\r\n     * @param types {...(String|Function)} - One or more type names or types themselves.\r\n     * @returns {undefined}\r\n     * @uncurried\r\n     */\r\n    errorIfNotTypes$ = getErrorIfNotTypesThrower$(defaultErrorMessageCall),\r\n\r\n    /**\r\n     * Same as `defaultTypeChecker$` except curried:\r\n     *  \"Returns a boolean indicating whether given value matches given type\".\r\n     * @curried\r\n     * @function module:fjlErrorThrowing.defaultTypeChecker\r\n     * @param Type {String|Function|Class} - Type name, constructor and/or class.\r\n     * @param value {*}\r\n     * @returns {Boolean}\r\n     */\r\n    defaultTypeChecker = curry(defaultTypeChecker$),\r\n\r\n    /**\r\n     * Checks that passed in `value` is of given `type`.  Throws an error if value\r\n     * is not of given `type`.  Curried.\r\n     * @function module:fjlErrorThrowing.errorIfNotType\r\n     * @param contextName {String} - Name of context to attribute errors if thrown.\r\n     * @param valueName {String} - String rep of value.\r\n     * @param value {Any}\r\n     * @param type {String|Function} - Type's name or type itself.\r\n     * @param [messageSuffix=null] {String} - Optional.\r\n     * @returns {undefined}\r\n     * @curried\r\n     */\r\n    errorIfNotType = curry(errorIfNotType$),\r\n\r\n    /**\r\n     * Checks that passed in `value` is of one of the given `types`.  Throws an error if value\r\n     *  is not of one of the given `types`.  Curried.\r\n     * @function module:fjlErrorThrowing.errorIfNotTypes\r\n     * @param contextName {String} - Name of context to attribute errors if thrown.\r\n     * @param valueName {String} - String rep of value.\r\n     * @param value {Any}\r\n     * @param types {...(String|Function)} - Type's name or type itself.\r\n     * @returns {undefined}\r\n     * @curried\r\n     */\r\n    errorIfNotTypes = curry4(errorIfNotTypes$),\r\n\r\n    /**\r\n     * Returns a function that can be used to ensure that values are of a given type.\r\n     *   Also throws informative error messages containing the value types, names, expected type names,\r\n     *   etc.\r\n     * @function module:fjlErrorThrowing.getErrorIfNotTypeThrower\r\n     * @param errorMessageCall {Function|errorMessageCall} - Template function (takes an info-object and returns a printed string).\r\n     * @returns {Function|errorIfNotType} - Returns a function with the same signature as `errorIfNotType` though curried.\r\n     */\r\n    getErrorIfNotTypeThrower = errorMessageCall => curry(getErrorIfNotTypeThrower$(errorMessageCall)),\r\n\r\n    /**\r\n     * Returns a function that can be used to ensure that a value is of one or more given types.\r\n     *   The returned function is used in cases where informative error messages\r\n     *   containing the value types, names, expected type names, are-required/should-be-used etc.\r\n     * @function module:fjlErrorThrowing.getErrorIfNotTypesThrower\r\n     * @param errorMessageCall {Function|errorMessageCall} - Template function (takes an info-object and returns a printed string).\r\n     * @returns {Function|errorIfNotTypes} - Returns a function with the same signature as `errorIfNotTypes` though curried.\r\n     */\r\n    getErrorIfNotTypesThrower = errorMessageCall => curry4(getErrorIfNotTypesThrower$(errorMessageCall))\r\n;\r\n\r\nexport default {\r\n    defaultTypeChecker$,\r\n    defaultTypeChecker,\r\n    getTypeName,\r\n    multiTypesToString,\r\n    defaultErrorMessageCall,\r\n    errorIfNotType$,\r\n    errorIfNotType,\r\n    errorIfNotTypes$,\r\n    errorIfNotTypes,\r\n    getErrorIfNotTypeThrower$,\r\n    getErrorIfNotTypeThrower,\r\n    getErrorIfNotTypesThrower$,\r\n    getErrorIfNotTypesThrower\r\n};\r\n"],"names":["version","getTypeName","isString","type","isFunction","name","Error","typeOf","defaultTypeChecker$","Type","value","isType","isset","multiTypesToString","length","types","intercalate","map","defaultErrorMessageCall","contextName","tmplContext","valueName","expectedTypeName","foundTypeName","messageSuffix","isMultiTypeNames","isArray","typesCopy","typesToMatchCopy","getErrorIfNotTypeThrower$","ValueType","typeChecker","errorMessageCall","getErrorIfNotTypesThrower$","valueTypes","expectedTypeNames","matchFound","some","errorIfNotType$","errorIfNotTypes$","defaultTypeChecker","curry","errorIfNotType","errorIfNotTypes","curry4","getErrorIfNotTypeThrower","getErrorIfNotTypesThrower"],"mappings":"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"}